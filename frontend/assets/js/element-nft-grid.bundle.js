(()=>{"use strict";const{__:t}=wp.i18n,e="smartnft",n=n=>{let r=null,s=null,a=null,i=null;const o=async t=>{if(s.category!=t&&t)try{i.startLoader();const e=await s.fetchNfts(t);i.renderNfts(e)}catch(t){console.log(t)}};r=JSON.parse(n),a=new class{constructor(t,e){this.categories=t||[],this.rootEl=e}renderCategories(){const t=this.categories.map(((t,e)=>this.renderCategory(t,e))).join(" ");this.clearRootEl(),this.rootEl&&this.rootEl.insertAdjacentHTML("afterbegin",t)}renderCategory(t,e){return`<p class="nft-grid__category ${0==e?"active":""}">${t.replace("-"," ")}</p>`}clearRootEl(){this.rootEl.innerHTML=""}}(r.category_selector,document.querySelector(`.smartnft_nft_grid_categories_${r.unique_id}`)),i=new class{constructor(t,e){this.settings=t,this.rootEl=e,this.limit=t.limit||12}startLoader(){const t=[...Array(this.limit)].map((t=>'\n        <div class="all-nft-skeleton__col" >\n          <div class="all-nft-skeleton__inner">\n            <div class="all-nft-skeleton__image-con">\n              <span class="skeleton-box all-nft-skeleton__image"></span>\n            </div>\n            <div class="all-nft-skeleton__contents">\n              <span class="skeleton-box all-nft-skeleton__name"></span>\n              <span class="skeleton-box all-nft-skeleton__price-label"></span>\n              <span class="skeleton-box all-nft-skeleton__price"></span>\n            </div>\n          </div>\n        </div>')).join(" ");this.clearRootEl(),this.rootEl&&this.rootEl.insertAdjacentHTML("afterbegin",t)}renderNfts(t){if(console.log(t),!t.length)return this.clearRootEl(),void this.rootEl.insertAdjacentHTML("afterbegin",this.notFound());const e=t.map((t=>this.renderNft(t))).join(" ");this.clearRootEl(),this.rootEl.insertAdjacentHTML("afterbegin",e),this.addMouseHoverVideoPlayListener()}addMouseHoverVideoPlayListener(){this.rootEl.querySelectorAll(".video-preview video").forEach((t=>{t.addEventListener("mouseenter",(t=>t.target.play())),t.addEventListener("mouseleave",(t=>t.target.pause()))}))}notFound(){return`\n      <div class="nonft-found">\n        <h3> ${t("No NFTS Found",e)}</h3>\n        <p>${t("No nfts has been found here.",e)}</p>\n      </div>`}videoMarkup(t){return`\n          <div class="video-preview">\n            <video\n              class="card__img"\n              src=${t?.mediaUrl}\n              alt=${t?.meta?.name}\n            />\n            <span class="video-icon">\n              <svg\n                xmlns="http://www.w3.org/2000/svg"\n                width="16"\n                height="16"\n                fill="currentColor"\n                class="bi bi-play-fill"\n                viewBox="0 0 16 16"\n              >\n                <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z" />\n              </svg>\n            </span>\n          </div>`}audioMarkup(t){const e=t?.thumbnailMediaUrl?.attach_url;return`\n        <div class="audio-preview">\n          <span class="form-preview-icon">\n            <svg\n              xmlns="http://www.w3.org/2000/svg"\n              width="16"\n              height="16"\n              fill="currentColor"\n              class="bi bi-music-note"\n              viewBox="0 0 16 16"\n            >\n              <path d="M9 13c0 1.105-1.12 2-2.5 2S4 14.105 4 13s1.12-2 2.5-2 2.5.895 2.5 2z" />\n              <path fillRule="evenodd" d="M9 3v10H8V3h1z" />\n              <path d="M8 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 13 2.22V4L8 5V2.82z" />\n            </svg>\n          </span>\n          ${e&&`<img src=${e} />`}\n        </div>`}imgMarkup(t){return`<img class="card__img" src=${t?.thumbnailMediaUrl?.attach_url} alt=${t.meta?.name} />`}userNameMarkup(t){return t.creator_name?`<p class=" meta-font card__creator">${t.creator_name}</p>`:`\n      <p class="meta-font card__creator">\n        ${t.creator?.substring(0,7)}....\n        ${t.creator?.substring(t.creator.length-4)}\n      </p>`}listedMarkup(n){return"true"==n.isListed?`\n      <p class="header-three card__price">\n            ${n.price} ${n?.selectedContract?.network.currencySymbol}\n      </p>`:`\n        <p class="header-three card__price">\n          ${t("Not for sale",e)}\n        </p>`}nftNameMarkup(t){return`\n        <p class="header-three card__name">\n          ${t.meta?.name.split(" ").length>4?`${t.meta?.name?.split(" ")?.splice(0,4)?.join(" ")}....`:t?.meta?.name}\n        </p>`}renderNft(n){return`\n    <div class="card">\n      <figure>\n        <a href=${n.permalink}>\n\t\t  ${n.fileType.startsWith("video")?this.videoMarkup(n):""}\n          ${n.fileType.startsWith("audio")?this.audioMarkup(n):""}\n          ${n.fileType.startsWith("image")?this.imgMarkup(n):""}\n        </a>\n      </figure>\n      <a href=${n.permalink}>\n        <div class="card__info">\n          ${this.userNameMarkup(n)}\n          ${this.nftNameMarkup(n)}\n          <span class="meta-font">${t("Price",e)}</span>\n          ${this.listedMarkup(n)}\n        </div>\n      </a>\n    </div>\n    `}clearRootEl(){this.rootEl.innerHTML=""}}(r,document.querySelector(`.smartnft_nft_grid_nfts_${r.unique_id}`)),s=new class{constructor(t){this.settings=t,this.category=null,this.nfts=[],this.limit=t.limit}async fetchNfts(t){if(this.category===t||!t)return this.nfts;try{const e=await jQuery.ajax({type:"post",url:nft_grid_local.BACKEND_AJAX_URL,data:{limit:this.limit||12,cat_slug:t,contract_addr:nft_grid_local.ACTIVE_CONTRACT?.address||"",action:"smartnft_get_nft_by_category"}});return this.category=t,this.nfts=e.data.nfts,this.nfts}catch(t){console.log(t)}}}(r),"yes"===r.isTabOn&&(a.renderCategories(),(()=>{const t=document.querySelectorAll(`.smartnft_nft_grid_categories_${r.unique_id} .nft-grid__category`);t.forEach(((e,n)=>e.addEventListener("click",(e=>{t.forEach((t=>{if(t==e.target)return t.classList.add("active");t.classList.remove("active")})),o(a.categories[n])}))))})());const l=r.category_selector[0];o(l)};window.SMARTNFT_NFT_GRID_RERUN_APP=()=>{"undefined"!=typeof smartnftNftGridElementSettings&&smartnftNftGridElementSettings.forEach((t=>{let e=0;requestAnimationFrame((function r(s){if(e<=s&&(e=s+300,void 0!==t)){const e=JSON.parse(t);if(document.querySelector(`.smartnft_nft_grid_categories_${e.unique_id}`))return void n(t)}requestAnimationFrame(r)}))}))},window.SMARTNFT_NFT_GRID_RERUN_APP()})();